# Migration `20201127224152-refazendo-tudo`

This migration has been generated by SigmaGF at 11/27/2020, 7:41:52 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."crvs" DROP CONSTRAINT "crvs_clientId_fkey"

ALTER TABLE "public"."crvs" DROP CONSTRAINT "crvs_veichleId_fkey"

CREATE TABLE "public"."clientes" (
"id" text   NOT NULL ,
"nome" text   NOT NULL ,
"documento" text   NOT NULL ,
"grupo" text   ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."recibos" (
"id" text   NOT NULL ,
"clienteId" text   NOT NULL ,
"placa" text   NOT NULL ,
"renavam" text   NOT NULL ,
"marcaModelo" text   NOT NULL ,
"tipo" text   NOT NULL ,
"observacao" text   ,
"emitidoEm" timestamp(3)   ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."recibos" ADD FOREIGN KEY ("clienteId")REFERENCES "public"."clientes"("id") ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE "public"."clients"

DROP TABLE "public"."crvs"

DROP TABLE "public"."vehicles"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201122220304-update-doctype-to-status..20201127224152-refazendo-tudo
--- datamodel.dml
+++ datamodel.dml
@@ -3,45 +3,34 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
-model Client {
+model Cliente {
   id         String    @id @default(uuid())
-  name       String
-  document   String
-  group      String?
+  nome       String
+  documento  String
+  grupo      String?
   createdAt  DateTime  @default(now())
   updatedAt  DateTime  @default(now()) @updatedAt
-  @@map("clients")
+  @@map("clientes")
 }
-model Vehicle {
-  id          String    @id @default(uuid())
-  plate       String
-  renavam     String
-  brandModel  String
-  type        String
-  createdAt   DateTime  @default(now())
-  updatedAt   DateTime  @default(now()) @updatedAt
+model recibos {
+  id           String    @id @default(uuid())
+  clienteId    String
+  placa        String
+  renavam      String
+  marcaModelo  String
+  tipo         String
+  observacao   String?
+  emitidoEm    DateTime?
+  createdAt    DateTime  @default(now())
+  updatedAt    DateTime  @default(now()) @updatedAt
-  @@map("vehicles")
-}
-
-model Crv {
-  id         String    @id @default(uuid())
-  clientId   String
-  vehicleId  String
-  issuedOn   DateTime?
-  details    String?
-  status     String
-  createdAt  DateTime  @default(now())
-  updatedAt  DateTime  @default(now()) @updatedAt
-
-  client     Client  @relation("crv-client", fields: [clientId], references: [id])
-  vehicle    Vehicle @relation("crv-veichle", fields: [vehicleId], references: [id])
+  cliente     Cliente  @relation("recibo-cliente", fields: [clienteId], references: [id])
-  @@map("crvs")
+  @@map("recibos")
 }
```


