# Migration `20201127230230-a`

This migration has been generated by SigmaGF at 11/27/2020, 8:02:30 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."recibos" DROP COLUMN "observacao",
DROP COLUMN "observacoes",
ADD COLUMN "detalhes" text   ,
ALTER COLUMN "situacao" SET NOT NULL

CREATE UNIQUE INDEX "clientes.documento_unique" ON "public"."clientes"("documento")

CREATE UNIQUE INDEX "recibos.placa_unique" ON "public"."recibos"("placa")

CREATE UNIQUE INDEX "recibos.renavam_unique" ON "public"."recibos"("renavam")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201127224152-refazendo-tudo..20201127230230-a
--- datamodel.dml
+++ datamodel.dml
@@ -3,33 +3,34 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Cliente {
   id         String    @id @default(uuid())
   nome       String
-  documento  String
+  documento  String    @unique
   grupo      String?
   createdAt  DateTime  @default(now())
   updatedAt  DateTime  @default(now()) @updatedAt
   @@map("clientes")
 }
 model recibos {
-  id           String    @id @default(uuid())
+  id           String     @id @default(uuid())
   clienteId    String
-  placa        String
-  renavam      String
+  placa        String     @unique
+  renavam      String     @unique
   marcaModelo  String
   tipo         String
-  observacao   String?
+  detalhes     String?
   emitidoEm    DateTime?
-  createdAt    DateTime  @default(now())
-  updatedAt    DateTime  @default(now()) @updatedAt
+  situacao     String
+  createdAt    DateTime   @default(now())
+  updatedAt    DateTime   @default(now()) @updatedAt
   cliente     Cliente  @relation("recibo-cliente", fields: [clienteId], references: [id])
   @@map("recibos")
```


